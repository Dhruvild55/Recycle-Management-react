import{e as k,r as a,j as e}from"./index-CF-I1X1V.js";import{i as C}from"./deleteIcon-C-_7dbNr.js";import{i as D}from"./ProfileIcon-CcvKBf8E.js";import{P as S}from"./index-Bje_Gxbr.js";import{u as R}from"./useQuery-CkQgBbiB.js";import{u as L}from"./useMutation-DiklKdbX.js";import{P as F,d as E,u as U}from"./index-Du4SGdHB.js";import{R as m}from"./axios-CMQmqZP5.js";import{C as I}from"./index-CwhMHnBu.js";import{a as M,r as Q}from"./index-lxSfC5In.js";import"./utils-km2FGkQ4.js";import"./index-DQFB-zv-.js";import"./Table-BxKk3JKt.js";const _=({Role:o})=>{var d,u;const i=k(s=>s.settings.translations),[t,h]=a.useState(10),[l,x]=a.useState(1),[n,q]=a.useState(!1),[c,p]=a.useState(""),g="Recycler",j=M(),{data:r,isLoading:f,isError:A,refetch:b}=R({queryKey:["userList",l,t,n,o],queryFn:()=>U({pageNumber:l,pageSize:t,isDescendingOrder:n,currentRole:g,Role:o}),keepPreviousData:!0}),{mutate:y,isPending:O}=L({mutationFn:E,onSuccess:s=>{console.log("delete User Succesfullly",s.message),m(s.message,"success"),b()},onError:s=>{console.log("error in user Deletion",s),m("Delete user failed","error")}}),v=[{key:"id",label:"User ID",render:s=>s.id.length>10?`${s.id.slice(0,10)}...`:s.id},{key:"firstName",label:"Name",render:s=>e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx(S,{size:30,userId:s.id}),e.jsx("span",{className:"ms-2",children:s.firstName})]})},{key:"roles",label:"Roles"},{key:"phoneNumber",label:"Phone No."},{key:"email",label:"Email"},{key:"lastLogin",label:"Status"},{key:"action",label:"Action",render:s=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>j(Q.viewRecycler),style:{backgroundColor:"#D9F0FF",padding:"5px 5px",borderRadius:"10px"},children:e.jsx("img",{src:D})}),e.jsx("button",{onClick:()=>y({userId:s.id}),children:e.jsx("img",{src:C})})]})}],N=(((d=r==null?void 0:r.data)==null?void 0:d.items)||[]).filter(s=>s.userName.toLowerCase().includes(c)),P=Math.ceil(((u=r==null?void 0:r.data)==null?void 0:u.totalRecords)/t);return e.jsxs("div",{children:[e.jsxs("div",{className:"userList-header",children:[e.jsx("label",{children:"List of Recycler"}),e.jsx("div",{children:e.jsx("input",{className:"search-input",type:"text",placeholder:i.search,value:c,onChange:s=>p(s.target.value.toLowerCase())})}),e.jsxs("div",{children:[e.jsx("label",{children:"Filter:"}),e.jsx("select",{children:e.jsx("option",{children:"All"})})]})]}),e.jsx(I,{headers:v,data:N,isLoading:f}),e.jsxs("div",{className:"table-footer",children:[e.jsxs("div",{children:[e.jsxs("span",{children:[i.show," "]}),e.jsx("select",{value:t,onChange:s=>h(Number(s.target.value)),children:[10,25,50,100].map(s=>e.jsx("option",{value:s,children:s},s))}),e.jsx("span",{children:i.entries})]}),e.jsx("div",{children:e.jsx(F,{currentPage:l,totalPages:P,onPageChange:x})})]})]})};export{_ as default};
