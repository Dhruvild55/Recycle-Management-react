import{r,e as P,j as e}from"./index-CF-I1X1V.js";import{P as D,d as L,u as k}from"./index-Du4SGdHB.js";import{i as C}from"./deleteIcon-C-_7dbNr.js";import{i as S}from"./editIcon-DsTOA8k_.js";import{P as A}from"./index-Bje_Gxbr.js";import{R as u}from"./axios-CMQmqZP5.js";import{u as E}from"./useQuery-CkQgBbiB.js";import{u as U}from"./useMutation-DiklKdbX.js";import{F}from"./index-DClfy-1j.js";import{a as I,r as R}from"./index-lxSfC5In.js";import{C as M}from"./index-CwhMHnBu.js";import"./index-DQFB-zv-.js";import"./utils-km2FGkQ4.js";import"./iconBase-DIAkMDBd.js";import"./Table-BxKk3JKt.js";const se=({Role:l})=>{var d,m;const[t,h]=r.useState(10),[i,x]=r.useState(1),[o,Q]=r.useState(!1),[c,p]=r.useState(""),g=I(),n=P(s=>s.settings.translations),{data:a,isLoading:j,isError:T,refetch:f}=E({queryKey:["userList",i,t,o,l],queryFn:()=>k({pageNumber:i,pageSize:t,isDescendingOrder:o,Role:l}),keepPreviousData:!0}),{mutate:b,isPending:q}=U({mutationFn:L,onSuccess:s=>{console.log("delete User Succesfullly",s.message),u(s.message,"success"),f()},onError:s=>{console.log("error in user Deletion",s),u("Delete user failed","error")}}),N=(((d=a==null?void 0:a.data)==null?void 0:d.items)||[]).filter(s=>s.userName.toLowerCase().includes(c)),v=Math.ceil(((m=a==null?void 0:a.data)==null?void 0:m.totalRecords)/t),y=[{key:"id",label:"User ID",render:s=>s.id.length>10?`${s.id.slice(0,10)}...`:s.id},{key:"userName",label:"Name",render:s=>e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx(A,{size:30,userId:s.id,image:s.selfiePath,name:s.userName}),e.jsx("span",{className:"ms-2",children:s.userName})]})},{key:"roles",label:"Roles"},{key:"phoneNumber",label:"Phone No."},{key:"email",label:"Email"},{key:"lastLoginDate",label:"Last Login",render:s=>e.jsx("div",{className:"d-flex align-items-center",children:e.jsx("span",{children:s.lastLoginDate})})},{key:"action",label:"Action",render:s=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>alert("This page is under Development!"),className:"action-btn",children:e.jsx("img",{src:S})}),e.jsx("button",{onClick:()=>b({userId:s.id}),className:"action-btn",children:e.jsx("img",{src:C})})]})}];return e.jsxs("div",{children:[e.jsxs("div",{className:"userList-header",children:[e.jsx("label",{children:"List of Admin"}),e.jsx("div",{children:e.jsx("input",{className:"search-input",type:"text",placeholder:n.search,value:c,onChange:s=>p(s.target.value.toLowerCase())})}),e.jsxs("button",{onClick:()=>g(R.addUser),className:"add-btn",children:[" ","Add Admin ",e.jsx(F,{style:{fontSize:"15px"}})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Filter:"}),e.jsx("select",{children:e.jsx("option",{children:"All"})})]})]}),e.jsx(M,{headers:y,data:N,isLoading:j}),e.jsxs("div",{className:"table-footer",children:[e.jsxs("div",{children:[e.jsxs("span",{children:[n.show," "]}),e.jsx("select",{value:t,onChange:s=>h(Number(s.target.value)),children:[10,25,50,100].map(s=>e.jsx("option",{value:s,children:s},s))}),e.jsx("span",{children:n.entries})]}),e.jsx("div",{children:e.jsx(D,{currentPage:i,totalPages:v,onPageChange:x})})]})]})};export{se as default};
