import{R as u,r as C,j as o,L as $}from"./index-CF-I1X1V.js";import{u as F}from"./useQuery-CkQgBbiB.js";import{u as _}from"./useMutation-DiklKdbX.js";import{a as N}from"./axios-CMQmqZP5.js";import{T as q}from"./Table-BxKk3JKt.js";import{b as K}from"./index-lxSfC5In.js";import"./utils-km2FGkQ4.js";function M(){return M=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},M.apply(this,arguments)}var V=u.createElement("svg",{viewBox:"-2 -5 14 20",height:"100%",width:"100%",style:{position:"absolute",top:0}},u.createElement("path",{d:"M9.9 2.12L7.78 0 4.95 2.828 2.12 0 0 2.12l2.83 2.83L0 7.776 2.123 9.9 4.95 7.07 7.78 9.9 9.9 7.776 7.072 4.95 9.9 2.12",fill:"#fff",fillRule:"evenodd"})),Q=u.createElement("svg",{height:"100%",width:"100%",viewBox:"-2 -5 17 21",style:{position:"absolute",top:0}},u.createElement("path",{d:"M11.264 0L5.26 6.004 2.103 2.847 0 4.95l5.26 5.26 8.108-8.107L11.264 0",fill:"#fff",fillRule:"evenodd"}));function T(n){if(n.length===7)return n;for(var e="#",t=1;t<4;t+=1)e+=n[t]+n[t];return e}function I(n,e,t,i,s){return function(f,y,p,x,g){var m=(f-p)/(y-p);if(m===0)return x;if(m===1)return g;for(var k="#",a=1;a<6;a+=2){var h=parseInt(x.substr(a,2),16),c=parseInt(g.substr(a,2),16),b=Math.round((1-m)*h+m*c).toString(16);b.length===1&&(b="0"+b),k+=b}return k}(n,e,t,T(i),T(s))}var R=function(n){function e(t){n.call(this,t);var i=t.height,s=t.width,f=t.checked;this.t=t.handleDiameter||i-2,this.i=Math.max(s-i,s-(i+this.t)/2),this.o=Math.max(0,(i-this.t)/2),this.state={h:f?this.i:this.o},this.l=0,this.u=0,this.p=this.p.bind(this),this.v=this.v.bind(this),this.k=this.k.bind(this),this.m=this.m.bind(this),this.M=this.M.bind(this),this.T=this.T.bind(this),this.$=this.$.bind(this),this.C=this.C.bind(this),this.D=this.D.bind(this),this.O=this.O.bind(this),this.S=this.S.bind(this),this.W=this.W.bind(this)}return n&&(e.__proto__=n),(e.prototype=Object.create(n&&n.prototype)).constructor=e,e.prototype.componentDidMount=function(){this.I=!0},e.prototype.componentDidUpdate=function(t){t.checked!==this.props.checked&&this.setState({h:this.props.checked?this.i:this.o})},e.prototype.componentWillUnmount=function(){this.I=!1},e.prototype.H=function(t){this.R.focus(),this.setState({j:t,B:!0,L:Date.now()})},e.prototype.N=function(t){var i=this.state,s=i.j,f=i.h,y=(this.props.checked?this.i:this.o)+t-s;i.U||t===s||this.setState({U:!0});var p=Math.min(this.i,Math.max(this.o,y));p!==f&&this.setState({h:p})},e.prototype.A=function(t){var i=this.state,s=i.h,f=i.U,y=i.L,p=this.props.checked,x=(this.i+this.o)/2;this.setState({h:this.props.checked?this.i:this.o});var g=Date.now()-y;(!f||g<250||p&&s<=x||!p&&s>=x)&&this.X(t),this.I&&this.setState({U:!1,B:!1}),this.l=Date.now()},e.prototype.p=function(t){t.preventDefault(),typeof t.button=="number"&&t.button!==0||(this.H(t.clientX),window.addEventListener("mousemove",this.v),window.addEventListener("mouseup",this.k))},e.prototype.v=function(t){t.preventDefault(),this.N(t.clientX)},e.prototype.k=function(t){this.A(t),window.removeEventListener("mousemove",this.v),window.removeEventListener("mouseup",this.k)},e.prototype.m=function(t){this.F=null,this.H(t.touches[0].clientX)},e.prototype.M=function(t){this.N(t.touches[0].clientX)},e.prototype.T=function(t){t.preventDefault(),this.A(t)},e.prototype.C=function(t){Date.now()-this.l>50&&(this.X(t),Date.now()-this.u>50&&this.I&&this.setState({B:!1}))},e.prototype.D=function(){this.u=Date.now()},e.prototype.O=function(){this.setState({B:!0})},e.prototype.S=function(){this.setState({B:!1})},e.prototype.W=function(t){this.R=t},e.prototype.$=function(t){t.preventDefault(),this.R.focus(),this.X(t),this.I&&this.setState({B:!1})},e.prototype.X=function(t){var i=this.props;(0,i.onChange)(!i.checked,t,i.id)},e.prototype.render=function(){var t=this.props,i=t.checked,s=t.disabled,f=t.className,y=t.offColor,p=t.onColor,x=t.offHandleColor,g=t.onHandleColor,m=t.checkedIcon,k=t.uncheckedIcon,a=t.checkedHandleIcon,h=t.uncheckedHandleIcon,c=t.boxShadow,b=t.activeBoxShadow,d=t.height,v=t.width,l=t.borderRadius,H=function(j,A){var D={};for(var S in j)Object.prototype.hasOwnProperty.call(j,S)&&A.indexOf(S)===-1&&(D[S]=j[S]);return D}(t,["checked","disabled","className","offColor","onColor","offHandleColor","onHandleColor","checkedIcon","uncheckedIcon","checkedHandleIcon","uncheckedHandleIcon","boxShadow","activeBoxShadow","height","width","borderRadius","handleDiameter"]),E=this.state,w=E.h,r=E.U,L=E.B,W={position:"relative",display:"inline-block",textAlign:"left",opacity:s?.5:1,direction:"ltr",borderRadius:d/2,WebkitTransition:"opacity 0.25s",MozTransition:"opacity 0.25s",transition:"opacity 0.25s",touchAction:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)",WebkitUserSelect:"none",MozUserSelect:"none",msUserSelect:"none",userSelect:"none"},B={height:d,width:v,margin:Math.max(0,(this.t-d)/2),position:"relative",background:I(w,this.i,this.o,y,p),borderRadius:typeof l=="number"?l:d/2,cursor:s?"default":"pointer",WebkitTransition:r?null:"background 0.25s",MozTransition:r?null:"background 0.25s",transition:r?null:"background 0.25s"},O={height:d,width:Math.min(1.5*d,v-(this.t+d)/2+1),position:"relative",opacity:(w-this.o)/(this.i-this.o),pointerEvents:"none",WebkitTransition:r?null:"opacity 0.25s",MozTransition:r?null:"opacity 0.25s",transition:r?null:"opacity 0.25s"},P={height:d,width:Math.min(1.5*d,v-(this.t+d)/2+1),position:"absolute",opacity:1-(w-this.o)/(this.i-this.o),right:0,top:0,pointerEvents:"none",WebkitTransition:r?null:"opacity 0.25s",MozTransition:r?null:"opacity 0.25s",transition:r?null:"opacity 0.25s"},U={height:this.t,width:this.t,background:I(w,this.i,this.o,x,g),display:"inline-block",cursor:s?"default":"pointer",borderRadius:typeof l=="number"?l-1:"50%",position:"absolute",transform:"translateX("+w+"px)",top:Math.max(0,(d-this.t)/2),outline:0,boxShadow:L?b:c,border:0,WebkitTransition:r?null:"background-color 0.25s, transform 0.25s, box-shadow 0.15s",MozTransition:r?null:"background-color 0.25s, transform 0.25s, box-shadow 0.15s",transition:r?null:"background-color 0.25s, transform 0.25s, box-shadow 0.15s"},z={height:this.t,width:this.t,opacity:Math.max(2*(1-(w-this.o)/(this.i-this.o)-.5),0),position:"absolute",left:0,top:0,pointerEvents:"none",WebkitTransition:r?null:"opacity 0.25s",MozTransition:r?null:"opacity 0.25s",transition:r?null:"opacity 0.25s"},X={height:this.t,width:this.t,opacity:Math.max(2*((w-this.o)/(this.i-this.o)-.5),0),position:"absolute",left:0,top:0,pointerEvents:"none",WebkitTransition:r?null:"opacity 0.25s",MozTransition:r?null:"opacity 0.25s",transition:r?null:"opacity 0.25s"};return u.createElement("div",{className:f,style:W},u.createElement("div",{className:"react-switch-bg",style:B,onClick:s?null:this.$,onMouseDown:function(j){return j.preventDefault()}},m&&u.createElement("div",{style:O},m),k&&u.createElement("div",{style:P},k)),u.createElement("div",{className:"react-switch-handle",style:U,onClick:function(j){return j.preventDefault()},onMouseDown:s?null:this.p,onTouchStart:s?null:this.m,onTouchMove:s?null:this.M,onTouchEnd:s?null:this.T,onTouchCancel:s?null:this.S},h&&u.createElement("div",{style:z},h),a&&u.createElement("div",{style:X},a)),u.createElement("input",M({},{type:"checkbox",role:"switch","aria-checked":i,checked:i,disabled:s,style:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",width:1}},H,{ref:this.W,onFocus:this.O,onBlur:this.S,onKeyUp:this.D,onChange:this.C})))},e}(C.Component);R.defaultProps={disabled:!1,offColor:"#888",onColor:"#080",offHandleColor:"#fff",onHandleColor:"#fff",uncheckedIcon:V,checkedIcon:Q,boxShadow:null,activeBoxShadow:"0 0 2px 3px #3bf",height:28,width:56};const Y=async({role:n})=>(await N.get(`/admin/getpermissions?roleName=${n}&culture=en`)).data,G=async n=>(console.log("query",n),(await N.put("/admin/updatepermission?culture=en",n)).data),st=()=>{const{role:n}=K(),[e,t]=C.useState([]),{data:i,isLoading:s,isError:f,refetch:y}=F({queryKey:["getPermissions",n],queryFn:()=>Y({role:n})}),{mutate:p,isPending:x}=_({mutationFn:G,onSuccess:a=>{y()}});C.useEffect(()=>{t(i==null?void 0:i.data)},[i]);const g=[{key:"pageName",label:"Page"},{key:"isView",label:"View"},{key:"isEdit",label:"Edit"},{key:"isCreate",label:"Create"},{key:"isDelete",label:"Delete"}],m={onColor:"#00ff00",offColor:"#ff0000",checkedIcon:!1,uncheckedIcon:!1},k=(a,h,c)=>{t(v=>v.map(l=>l.pageName===c?{...l,[h]:!l[h]}:l));const b=e.find(v=>v.pageName===c);if(!b)return;const d={...b,[h]:!b[h]};p(d,{onError:()=>{t(v=>v.map(l=>l.pageName===c?{...l,[h]:!l[h]}:l))}})};return o.jsx("div",{className:"permission-section",children:o.jsxs("div",{className:"permission-container",children:[o.jsx("div",{children:o.jsx("button",{className:"back-btn",children:"Back to Roles List"})}),o.jsxs("div",{children:[o.jsx("p",{children:"Roles"}),o.jsxs("div",{className:"input-section",children:[o.jsx("input",{type:"text",placeholder:"Enter your new role"}),o.jsx("button",{className:"save-btn",children:"Save"})]})]}),o.jsx("div",{className:"table-section",children:o.jsx("p",{children:"Permissions"})}),o.jsxs(q,{responsive:!0,children:[o.jsx("thead",{children:o.jsx("tr",{children:g.map((a,h)=>o.jsx("th",{style:{textAlign:"left",padding:a.label==="Page"?"16px 30px":"16px 50px"},children:a.label},h))})}),o.jsx("tbody",{children:s?o.jsx("tr",{children:o.jsx("td",{colSpan:"7",children:o.jsx("div",{className:"loader-container",children:o.jsx($,{animation:"border",width:"15px",height:"15px"})})})}):e==null?void 0:e.map((a,h)=>o.jsxs("tr",{children:[o.jsx("td",{style:{textAlign:"left",paddingLeft:"28px",fontSize:"14px",fontWeight:"400",color:"#181D27",paddingTop:"10px",paddingBottom:"10px"},children:a.pageName}),g.slice(1).map(c=>o.jsx("td",{style:{textAlign:"right",paddingLeft:"28px"},children:o.jsxs("div",{className:"d-flex align-items-right",children:[o.jsx("label",{style:{color:"black",marginRight:"10px"},children:a[c.key]===!0?"Yes":"No"}),o.jsx(R,{checked:a[c.key],onChange:()=>k(h,c.key,a.pageName),offHandleColor:"#FF0000",onHandleColor:"#00DE4E",checkedIcon:m.checkedIcon,uncheckedIcon:m.uncheckedIcon,className:`custom-switch ${a[c.key]?"":"unchecked"}`})]})},c.key))]},h))})]})]})})};export{st as default};
