import{e as C,r as a,j as e}from"./index-CF-I1X1V.js";import{i as P}from"./deleteIcon-C-_7dbNr.js";import{i as k}from"./ProfileIcon-CcvKBf8E.js";import{P as D}from"./index-Bje_Gxbr.js";import{P as S,d as L,u as F}from"./index-Du4SGdHB.js";import{u as E}from"./useQuery-CkQgBbiB.js";import{u as R}from"./useMutation-DiklKdbX.js";import{R as m}from"./axios-CMQmqZP5.js";import{C as U}from"./index-CwhMHnBu.js";import{a as I,r as M}from"./index-lxSfC5In.js";import"./index-DQFB-zv-.js";import"./utils-km2FGkQ4.js";import"./Table-BxKk3JKt.js";const Z=({Role:o})=>{var d,u;const i=C(s=>s.settings.translations),[t,h]=a.useState(10),[l,x]=a.useState(1),[n,Q]=a.useState(!1),[c,p]=a.useState(""),g=I(),{data:r,isLoading:j,isError:q,refetch:f}=E({queryKey:["userList",l,t,n,o],queryFn:()=>F({pageNumber:l,pageSize:t,isDescendingOrder:n,Role:o}),keepPreviousData:!0}),{mutate:b,isPending:A}=R({mutationFn:L,onSuccess:s=>{console.log("delete User Succesfullly",s.message),m(s.message,"success"),f()},onError:s=>{console.log("error in user Deletion",s),m("Delete user failed","error")}}),v=[{key:"id",label:"User ID",render:s=>s.id.length>10?`${s.id.slice(0,10)}...`:s.id},{key:"firstName",label:"Name",render:s=>e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx(D,{size:30,userId:s.id}),e.jsx("span",{className:"ms-2",children:s.firstName})]})},{key:"roles",label:"Roles"},{key:"phoneNumber",label:"Phone No."},{key:"email",label:"Email"},{key:"lastLogin",label:"Status"},{key:"action",label:"Action",render:s=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>g(M.ViewCollecter),style:{backgroundColor:"#D9F0FF",padding:"5px 5px",borderRadius:"10px"},children:e.jsx("img",{src:k})}),e.jsx("button",{onClick:()=>b({userId:s.id}),children:e.jsx("img",{src:P})})]})}],y=(((d=r==null?void 0:r.data)==null?void 0:d.items)||[]).filter(s=>s.userName.toLowerCase().includes(c)),N=Math.ceil(((u=r==null?void 0:r.data)==null?void 0:u.totalRecords)/t);return e.jsxs("div",{children:[e.jsxs("div",{className:"userList-header",children:[e.jsx("label",{children:"List of Collectors"}),e.jsx("div",{children:e.jsx("input",{className:"search-input",type:"text",placeholder:i.search,value:c,onChange:s=>p(s.target.value.toLowerCase())})}),e.jsxs("div",{children:[e.jsx("label",{children:"Filter:"}),e.jsx("select",{children:e.jsx("option",{children:"All"})})]})]}),e.jsx(U,{headers:v,data:y,isLoading:j}),e.jsxs("div",{className:"table-footer",children:[e.jsxs("div",{children:[e.jsxs("span",{children:[i.show," "]}),e.jsx("select",{value:t,onChange:s=>h(Number(s.target.value)),children:[10,25,50,100].map(s=>e.jsx("option",{value:s,children:s},s))}),e.jsx("span",{children:i.entries})]}),e.jsx("div",{children:e.jsx(S,{currentPage:l,totalPages:N,onPageChange:x})})]})]})};export{Z as default};
