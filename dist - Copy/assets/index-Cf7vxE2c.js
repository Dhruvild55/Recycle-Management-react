import{j as e,e as q,r as p,L as k}from"./index-CF-I1X1V.js";import{u as E}from"./useMutation-DiklKdbX.js";import{a as S,R as b}from"./axios-CMQmqZP5.js";import{a as M,r as g}from"./index-lxSfC5In.js";import{u as A}from"./index.esm-nAh5TuE8.js";import{P as B}from"./index-Bje_Gxbr.js";import{G as w}from"./iconBase-DIAkMDBd.js";import"./utils-km2FGkQ4.js";import"./useQuery-CkQgBbiB.js";function v(a){return w({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"},child:[]},{tag:"line",attr:{x1:"1",y1:"1",x2:"23",y2:"23"},child:[]}]})(a)}function N(a){return w({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"12",r:"3"},child:[]}]})(a)}const u=({label:a,placeholder:n,type:o,register:m,errors:l,name:d,validation:c})=>e.jsxs("div",{className:"input-field",children:[e.jsx("label",{children:a}),o==="tel"?e.jsxs("div",{className:"phone-input",children:[e.jsx("select",{className:"country-code",children:e.jsx("option",{children:"+60"})}),e.jsx("input",{className:"phone-input-box",type:o,placeholder:n,...m(d,c)})]}):e.jsxs("div",{children:[e.jsx("input",{placeholder:n,type:o,...m?m(d,c):{}}),l&&l[d]&&e.jsx("p",{className:"error-message",children:l[d].message})]})]}),F=async a=>(await S.post("/admin/createaccount?culture=en",a,{headers:{"Content-Type":"multipart/form-data"}})).data,h={firstName:{required:"First name is required",minLength:{value:2,message:"Must be at least 2 characters"},maxLength:{value:50,message:"Must be less than 50 characters"},pattern:{value:/^[A-Za-z\s'-]+$/,message:"Please enter a valid name"}},lastName:{required:"Last name is required",minLength:{value:2,message:"Must be at least 2 characters"},maxLength:{value:50,message:"Must be less than 50 characters"},pattern:{value:/^[A-Za-z\s'-]+$/,message:"Please enter a valid name"}},email:{required:"Email is required",pattern:{value:/^[^\s@]+@[^\s@]+\.[^\s@]+$/,message:"Please enter a valid email address"}},phone:{required:"Phone number is required",pattern:{value:/^[0-9]{10,15}$/,message:"Please enter a valid phone number"}},password:{required:"Password is required",minLength:{value:8,message:"Must be at least 8 characters"}},confirmPassword:a=>({required:"Confirm Password is required",validate:n=>n===a("password")||"Passwords do not match"})};function G(){const a=M(),n=q(s=>s.settings.translations),[o,m]=p.useState(!1),[l,d]=p.useState(!1),[c,x]=p.useState(null),f=p.useRef(null),{register:i,handleSubmit:C,watch:P,formState:{errors:r}}=A(),{mutate:y,isPending:j}=E({mutationFn:F,onSuccess:s=>{b(s==null?void 0:s.message,"success"),a(g.userManagement)},onError:()=>{b("Unauthorized Token","error")}}),L=s=>{const t=s.target.files[0];t&&x(t)},R=async s=>{const t=new FormData;t.append("FirstName",s.firstName),t.append("LastName",s.lastName),t.append("Email",s.email),t.append("Password",s.password),t.append("Phone",s.phone),t.append("Role",s.roles),c&&t.append("selfie",c),y(t)};return e.jsx("div",{className:"create-admin-section",children:e.jsxs("div",{className:"main-section",children:[e.jsx("div",{className:"header-contant",children:e.jsx("button",{className:"back-button",onClick:()=>a(g.userManagement),children:"← BACK"})}),e.jsxs("div",{className:"personal-info-section",children:[e.jsx("h2",{children:"Personal Information"}),e.jsxs("div",{className:"profile-photo-section",children:[e.jsxs("div",{className:"profile-left",children:[e.jsx("p",{className:"profile-left-title",children:"Your Photo"}),e.jsx("p",{children:"This will be displayed on your profile"})]}),e.jsx("div",{className:"profile-center",children:e.jsx(B,{size:60,image:c?URL.createObjectURL(c):null})}),e.jsxs("div",{className:"photo-actions",children:[e.jsx("button",{className:"delete-button",onClick:()=>x(null),children:"Delete"}),e.jsx("button",{className:"update-button",onClick:()=>f.current.click(),children:"Update"})]}),e.jsx("input",{type:"file",accept:"image/*",ref:f,style:{display:"none"},onChange:L})]}),e.jsxs("form",{className:"form",onSubmit:C(R),children:[e.jsxs("div",{className:"form-group",children:[e.jsx(u,{label:n.first_Name,placeholder:n.first_Name,type:"text",register:i,errors:r,name:"firstName",validation:h.firstName}),e.jsx(u,{label:n.last_name,placeholder:n.last_name,type:"text",register:i,errors:r,name:"lastName",validation:h.lastName}),e.jsx(u,{label:"Username",placeholder:"username",type:"text",register:i,errors:r,name:"userName"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx(u,{label:"phone number",placeholder:"Phone Number",type:"tel",register:i,errors:r,name:"phone",validation:h.phone}),e.jsx(u,{label:"email",placeholder:"Enter Your Email",type:"email",register:i,errors:r,name:"email",validation:h.email}),e.jsxs("div",{className:"input-field",children:[e.jsx("label",{children:"Password"}),e.jsx("input",{type:o?"text":"password",placeholder:"Create a password",...i("password",{required:"Password is required",minLength:{value:8,message:"Must be at least 8 characters"}})}),e.jsx("button",{type:"button",className:"eye-button",onClick:()=>m(!o),children:o?e.jsx(N,{}):e.jsx(v,{})}),r.password&&e.jsx("p",{className:"error-message",children:r.password.message})]})]}),e.jsxs("div",{className:"form-group-last",children:[e.jsxs("div",{className:"input-field",children:[e.jsx("label",{children:"Roles"}),e.jsxs("select",{...i("roles",{required:"Role selection is required"}),className:"roles-input",children:[e.jsx("option",{value:"admin",children:"Admin"}),e.jsx("option",{value:"super Admin",children:"Super Admin"}),e.jsx("option",{value:"b2b Collector",children:"B2B COLLECTOR"}),e.jsx("option",{value:"b2b Recycler",children:"B2B RECYCLER"}),e.jsx("option",{value:"b2c Collector",children:"B2C COLLECTOR"}),e.jsx("option",{value:"b2c Recycler",children:"B2C RECYCLER"})]}),r.roles&&e.jsx("p",{className:"error-message",children:r.roles.message})]}),e.jsxs("div",{className:"input-field",children:[e.jsx("label",{children:"Confirm Password"}),e.jsx("input",{type:l?"text":"password",placeholder:"Confirm your password",...i("confirmPassword",{required:"Confirm Password is required",validate:s=>s===P("password")||"Passwords do not match"}),className:"conform-password-input"}),e.jsx("button",{type:"button",className:"eye-button",onClick:()=>d(!l),children:l?e.jsx(N,{}):e.jsx(v,{})}),r.confirmPassword&&e.jsx("p",{className:"error-message",children:r.confirmPassword.message})]})]}),e.jsxs("div",{className:"form-actions",children:[e.jsx("button",{type:"submit",className:"submit-button",disabled:j,children:j?e.jsx(k,{animation:"border",width:"20px",height:"20px"}):"Submit"}),e.jsx("button",{type:"button",className:"cancel-button",children:"Cancel"})]})]})]})]})})}export{G as default};
